<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Create</title>
    <link rel="stylesheet" type="text/css" href="createpage.css">

        <!-- Bootstrap CSS -->
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
        crossorigin="anonymous"
      />

</head>

<body>
    <div class="">
        <div>
            <div id="sidebar"> </div>
            <!--- main --->
            <div class="main">
                <div id="topbar-div"></div>
                <div class="createPageDiv">
                    <div class="actionBtns">
                        <button type="button" class="btn btn-primary" ><ion-icon name="add-circle-outline"></ion-icon> Animation</button>
                        <button type="button" class="btn btn-primary" onclick="newHeading()"><ion-icon name="add-circle-outline"></ion-icon> Heading</button>
                        <button type="button" class="btn btn-primary" onclick="newText()"><ion-icon name="add-circle-outline"></ion-icon> Text</button>
                        <button type="button" class="btn btn-primary"><ion-icon name="add-circle-outline"></ion-icon> Quiz</button>
                        <button type="button" class="btn btn-primary"><ion-icon name="add-circle-outline"></ion-icon>
                            <p><input type="file"  accept="image/*" name="image" id="file"  onchange="newImage(event)" style="display: none;"></p>
                            <p><label for="file" style="cursor: pointer;">Upload Image</label></p>
                        </button>
                        <button type="button" class="btn btn-primary"><ion-icon name="add-circle-outline"></ion-icon> Video</button>
                    </div>
                    <div class="pageContainer">
                        <div id="inputDiv">
                        </div>
                        <div class="btnDiv">
                            <button type="button" class="btn btn-secondary">Save as draft</button>
                            <button type="button" class="btn btn-primary">Publish</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>


        <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"
      ></script>
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="/assets/js/ckeditor/ckeditor.js"></script>

        <script>
            CKEDITOR.replace('editor');
        </script>


        <script> 
            var headingId = 0;

            function newHeading(){
                
                var parent = document.getElementById("inputDiv")
                var div = document.createElement("div")
                div.className="headingDiv"
                div.id="headDiv"+headingId
                var field = document.createElement("input")
                var removeBtn = document.createElement("button")
                removeBtn.setAttribute("onclick",`removeHeading("heading",${headingId})`)
                var removeIcon = document.createElement("ion-icon")
                removeIcon.name="remove-circle-outline"
                removeBtn.appendChild(removeIcon)
                field.className = "form-control"
                field.style = "display:block;"
                field.id = "input" +headingId;
                field.placeholder="Enter title"
                div.appendChild(field)
                div.appendChild(removeBtn)
                parent.appendChild(div);
                headingId =headingId+ 1;
            } 




     var textId=0;


     function newText(){

        var parent = document.getElementById("inputDiv")
        var div = document.createElement("div")
        div.className="textDiv"
        div.id="textDiv"+textId
        var field = document.createElement("textarea")
        field.className = "form-control"
        field.style = "display:block;"
        field.id = "textarea" +textId;
        field.name = "textarea" +textId;
        field.placeholder="Enter text"
        field.rows=3      
        var removeBtn = document.createElement("button")
        removeBtn.setAttribute("onclick",`removeHeading("text",${textId})`)
        var removeIcon = document.createElement("ion-icon")
        removeIcon.name="remove-circle-outline"
        removeBtn.appendChild(removeIcon)

        div.appendChild(field)
        div.appendChild(removeBtn)
        parent.appendChild(div);

        CKEDITOR.replace(`textarea${textId}`);
        textId =textId+ 1;

     }

     var imgId=0

     function newImage(event) {
        var parent = document.getElementById("inputDiv")
        var div = document.createElement("div")
        div.className="imgDiv"
        div.id="imgDiv"+imgId
        var field = document.createElement("img")
        field.id="img"+imgId
        field.width=300
       div.appendChild(field)
       parent.appendChild(div);
       var image = document.getElementById(`img${imgId}`);
       image.src = URL.createObjectURL(event.target.files[0]);
       imgId= imgId+1
    };


     function  removeHeading(field,id){
        if(field==="heading"){
            document.getElementById(`headDiv${id}`).remove()
        }else if(field==="text"){
            document.getElementById(`textDiv${id}`).remove()
        }
        
     }

            $(function(){
                $("#sidebar").load("../../component/sidebar.html");
                $("#topbar-div").load("../../component/topbar.html");
              });
            // Menu Toggle

            let navigation = document.querySelector('.navigation');
            let toggle = document.querySelector('.toggle');
            let main = document.querySelector('.main');

            toggle.onclick = function() {
                    navigation.classList.toggle('active');
                    main.classList.toggle('active');
                }
                // add hovered classn selected list item

            let list = document.querySelectorAll('.navigation li');

            function activeLink() {
                list.forEach((item) =>
                    item.classList.remove('hovered'));
                this.classList.add('hovered');  
            }
            function activeMenu() {
                list.forEach((item) =>
                    item.classList.remove('active'));
                this.classList.add('active');  
            }
            list.forEach((item) =>
                item.addEventListener('mouseover', activeLink))

            list.forEach((item) =>
                item.addEventListener('click', activeMenu))


    

        </script>
</body>

</html>